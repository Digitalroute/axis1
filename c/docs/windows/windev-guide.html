<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--*** This is a generated file.  Do not edit.  ***-->
<link rel="stylesheet" href="../skin/tigris.css" type="text/css">
<link rel="stylesheet" href="../skin/mysite.css" type="text/css">
<link rel="stylesheet" href="../skin/site.css" type="text/css">
<link media="print" rel="stylesheet" href="../skin/print.css" type="text/css">
<title></title>
</head>
<body bgcolor="white" class="composite">
<!--================= start Banner ==================-->
<div id="banner">
<table width="100%" cellpadding="8" cellspacing="0" summary="banner" border="0">
<tbody>
<tr>

<!--================= start Group Logo ==================-->
<td align="left">
<div class="groupLogo">
<a href="http://ws.apache.org/"><img border="0" class="logoImage" alt="The Apache WebServices Project" src="../images/project-logo.jpg"></a>
</div>
</td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td align="right">
<div class="projectLogo">
<a href="http://ws.apache.org/axis/"><img border="0" class="logoImage" alt="The Apache Axis Project" src="../images/axis.jpg"></a>
</div>
</td>
<!--================= end Project Logo ==================-->
<!--================= start Search ==================--><td valign="top" rowspan="2" align="right" class="search">
<form target="_blank" action="http://www.google.com/search" method="get">
<table summary="search" border="0" cellspacing="0" cellpadding="0">
<tr>

<td bgcolor="#a5b6c6" colspan="3"><img height="10" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td colspan="3"><img height="8" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td nowrap="nowrap"><input value="ws.apache.org" name="sitesearch" type="hidden"><input size="10" name="q" id="query" type="text"><img height="1" width="5" alt="" src="../skin/images/spacer.gif" class="spacer"><input name="Search" value="GO" type="submit">
<br>
                          Search WS</td><td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td colspan="3"><img height="7" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td class="bottom-left-thick"></td><td bgcolor="#a5b6c6"><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td class="bottom-right-thick"></td>

</tr>
</table>
</form>
</td>
<!--================= end Search ==================-->
</tr>
</tbody>
</table>
</div>
<!--================= end Banner ==================-->
<!--================= start Main ==================-->
<table width="100%" cellpadding="0" cellspacing="0" border="0" summary="nav" id="breadcrumbs">
<tbody>
<!--================= start Status ==================-->
<tr class="status">
<td>
<!--================= start BreadCrumb ==================--><a href="http://www.apache.org/">Apache</a> | <a href="http://ws.apache.org/">WS</a><a href=""></a>

<!--================= end BreadCrumb ==================--></td><td id="tabs">
<!--================= start Tabs ==================-->
<div class="tab">
<span class="selectedTab"><a class="base-selected" href="../index.html">WebServices-Axis</a></span>
</div>
<!--================= end Tabs ==================-->
</td>
</tr>
</tbody>
</table>
<!--================= end Status ==================-->
<table id="main" width="100%" cellpadding="8" cellspacing="0" summary="" border="0">
<tbody>
<tr valign="top">
<!--================= start Menu ==================-->
<td id="leftcol">

<div id="navcolumn">
<div class="menuBar">
<div class="menu">
<span class="menuLabel">Axis</span>
 
<div class="menuItem">
<a href="../index.html">Introduction</a>
</div>
 
<div class="menuItem">
<a href="../news.html">News</a>
</div>

 

<div class="menuItem">
<a href="http://nagoya.apache.org/wiki/apachewiki.cgi?AxisProjectPages">FAQ/Wiki</a>
</div>
 
<div class="menu">
<span class="menuLabel">Get Involved</span>
  
<div class="menuItem">
<a href="../overview.html">Overview</a>
</div>
  
<div class="menuItem">
<a href="../cvs.html">CVS Repository</a>

</div>
  
<div class="menuItem">
<a href="../mail.html">Mailing Lists</a>
</div>
  
<div class="menuItem">
<a href="../ref.html">Reference Library</a>
</div>
  
<div class="menuItem">
<a href="../bugs.html">Bugs</a>
</div>
 

</div>
 
<div class="menu">
<span class="menuLabel">Axis (Java)</span>
  
<div class="menuItem">
<a href="../java/index.html">Documentation</a>
</div>
  
<div class="menuItem">
<a href="../java/install.html">Installation</a>
</div>
  
<div class="menuItem">

<a href="../java/user-guide.html">User's Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/developers-guide.html">Developer's Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/integration-guide.html">Integration Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/architecture-guide.html">Architecture Guide</a>

</div>
  
<div class="menuItem">
<a href="../java/reference.html">Reference Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/reading.html">Reading Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/requirements.html">Requirements</a>
</div>
 

</div>
 
<div class="menu">
<span class="menuLabel">Axis (C++)</span>
  
<div class="menuItem">
<a href="../cpp/index.html">Axis C++ alpha released!</a>
</div>
  
<div class="menuItem">
<a href="../cpp/documentation.html">Documenation</a>
</div>
  
<div class="menuItem">

<a href="../cpp/download.html">Download</a>
</div>
  
<div class="menuItem">
<a href="../cpp/who.html">Who we are</a>
</div>
  
</div>

<div class="menu">
<span class="menuLabel">Downloads</span>
  
<div class="menuItem">
<a href="../releases.html">Releases</a>

</div>
  
<div class="menuItem">
<a href="../interim.html">Interim Drops</a>
</div>
  
<div class="menuItem">
<a href="http://cvs.apache.org/viewcvs/ws-axis/">Source Code</a>
</div>

</div>

<div class="menu">
<span class="menuLabel">Related Projects</span>

  
<div class="menuItem">
<a href="http://ws.apache.org/wsif/">WSIF</a>
</div>
  
<div class="menuItem">
<a href="http://cvs.apache.org/viewcvs/*checkout*/ws-wsil/java/README.htm">WSIL</a>
</div>
  
<div class="menuItem">
<a href="http://www-124.ibm.com/developerworks/projects/wsdl4j/">WSDL4J</a>
</div>
  
<div class="menuItem">

<a href="http://www.uddi4j.org/">UDDI4J</a>
</div>

</div>

<div class="menu">
<span class="menuLabel">Misc</span>
  
<div class="menuItem">
<a href="../site.html">Whole Site</a>
</div>
  
<div class="menuItem">
<a href="../who.html">Who We Are</a>

</div>
  
<div class="menuItem">
<a href="../contact.html">Contact</a>
</div>
  
<div class="menuItem">
<a href="../legal.html">Legal</a>
</div>

  
<div class="menuItem">
<a href="../docs.html">Notes/Docs</a>
</div>

</div>


</div>
</div>
</div>
</td>
<!--================= end Menu ==================-->
<!--================= start Content ==================--><td>
<div id="bodycol">
<div class="app">
<div align="center">
<h1></h1>
</div>
<div class="h3">
<div class="h3">

<h3>Axis C++ Windows Developers Guide (Alpha)</h3>
</div>
<p>
<a href="#buildaxis">BUILDING AND DEPLOYING AXIS C++</a>
<br>
<a href="#cvscheckout">Getting a cvs checkout</a>
<br>
<a href="#getapachexerces">Getting Apache and Xerces-C</a>
<br>
<a href="#installapachexerces">Installing Apache and extracting Xerces-C</a>
<br>
<a href="#setupandbuildaxis">Setting up the build environment and building Axis</a>

<br>
<a href="#deployaxis">Deploying Axis in Apache</a>
<br>
<a href="#deploywebservice">DEPLOYING A WEB SERVICE IN AXIS C++</a>
<br>
<a href="#generatefiles">Generating Serverside Skeletons/ wrappers and client side stubs</a>
<br>
<a href="#eclipse">Using eclipse to build and run WSDL2Ws</a>
<br>
<a href="#commandline">Building and running WSDL2Ws on the command line</a>
<br>
<a href="#builddeployws">Building and Deploying the web service</a>

<br>
<a href="#consumews">CONSUMING THE WEB SERVICE WITH AXIS C++ CLIENT</a>
<br>
<a href="#runclient">Coding and Running the client</a>
</p>
<p>
<a name="buildaxis"></a>
</p>
<div class="h3">
<h3>Building and Deploying Axis C++</h3>
</div>
<p>
<a name="cvscheckout"></a>
</p>

<div class="h4">
<h4>Getting a cvs checkout</h4>
</div>
<p>Visit http://ws.apache.org/ click on &ldquo;axis&rdquo; and then on &ldquo;CVS Repository&rdquo; to find details on accessing the CVS Repository. It will have instructions similar to the following.<br>
<br>&ldquo;Anyone can checkout source code from our anonymous CVS server. To do so, simply use the following commands (if you are using a GUI CVS client, configure it appropriately):<br>
<br>cvs -d :pserver:anoncvs@cvs.apache.org:/home/cvspublic login<br>password: anoncvs<br>

<br>cvs -d :pserver:anoncvs@cvs.apache.org:/home/cvspublic checkout ws-axis<br>
<br>The examples given below will be based on these lines of instructions.<br>
<br>To use the command line cvs client go to http://www.cvshome.org, click on the "CVS Downloads" link. In the resulting page there will be link named "historical download pages", under the heading "CVS downloads", where you can download the cvs binaries for Windows. Download the Windows cvs binaries. Extract the cvs binaries from the downloaded zip file. There will be a &ldquo;cvs.exe&rdquo; file when this is extracted. Set the PATH environment variable to where &ldquo;cvs.exe&rdquo; is.<br>You would have to do the following to get a checkout from the command line cvs client.<br>
<br>cvs -d :pserver:anoncvs@cvs.apache.org:/home/cvspublic login<br>Now you will be prompted for the password. Enter the password.<br>
<br>password: anoncvs<br>

<br>Now enter the following cvs command to checkout the axis Repository.<br>cvs -d :pserver:anoncvs@cvs.apache.org:/home/cvspublic checkout ws-axis<br>
<br>The checkout of the repository will be created in the current directory in a folder named &ldquo;ws-axis&rdquo;<br>
<br>The checked out folder ws-axis will be referred to as [CHECKOUT_HOME] from this point on.<br>&nbsp;</p>
<p>
<a name="getapachexerces"></a>
</p>
<div class="h4">
<h4>Getting Apache and Xerces-C</h4>
</div>
<p>
<strong>Xerces-C</strong>

<br>Download the Xerces-C ( 32 bit binary release)from: http://xml.apache.org/xerces-c/download.cgi<br>
<br>
<strong>Apache web server</strong>
<br>Download the Apache web server from www.apache.org. Currently Axis supports apache 1.3.x Web server and not versions 2.0 or above. This documentation was tested with Apache1.3.28 and it is recommended that you download this version.</p>
<p>
<a name="installapachexerces"></a>
</p>
<div class="h4">
<h4>Installing Apache and extracting Xerces-C</h4>
</div>
<p>Install Apache1.3.28.By default Apache is installed in C:\Program Files\Apache Group\Apache. This location will be referred as [APACHE_HOME] from this point onwards.</p>
<p>

<br>This documentation was tested with the xerces version 2.3.0 which is distributed as xerces-c_2_3_0-win32.zip . Unzip the file xerces-c_2_3_0-win32.zip. The folder to which xerces is unzipped will be referred to as [XERCES_EXTRACT] from this point onwards.<br>&nbsp;</p>
<p>
<a name="setupandbuildaxis"></a>
</p>
<div class="h4">
<h4>Setting up the build environment</h4>
</div>
<p>1)copy the contents inside the "[XERCES_EXTRACT] \include\xercesc &ldquo;<br>to [CHECKOUT_HOME]\c\include\xercesc<br>2) Copy the content of the [APACHE_HOME] \ include directory to [CHECKOUT_HOME] \c\include\apache1_3\<br>3) Copy the lib files from &ldquo;[XERCES_EXTRACT] \lib&rdquo; to &ldquo;[CHECKOUT_HOME]\c\lib\win32\xercesc&rdquo;<br>4) Copy the lib files from the &ldquo;[APACHE_HOME] \libexec&rdquo; to &ldquo;[CHECKOUT_HOME]\c\lib\win32\apache1_3&rdquo;<br>5) In Visual C++ (The version used for this documentation was Visual C++ 6.0)open the file Axis.dsw which is in [CHECKOUT_HOME]\ws-axis \c\ vc. In the workspace window &ldquo;File View&rdquo;, right click on the project Apache1_3 and click on the &ldquo;Set as Active Project&rdquo; to make it the Active Project.<br>6) Again in Visual C++ right click on the project Apache1_3 in the workspace window &ldquo;File View&rdquo; and then click on &ldquo;Settings&hellip;&rdquo; on the popup menu. Select the &ldquo;link&rdquo; tab. Select &ldquo;General&rdquo; from the Category drop down list. In the &ldquo;Output file name&rdquo; text box put the value &ldquo;[APACHE_HOME]\modules\mod_axis.dll&rdquo; and click &ldquo;OK&rdquo;.</p>

<p>
<img alt="" src="images/c/mod_axis.jpg"></p>
<p>7) In Visual C++ Go to &ldquo;Build -&gt; Rebuild All &ldquo; to build mod_axis.dll<br>&nbsp;</p>
<p>
<a name="deployaxis"></a>
</p>
<div class="h4">
<h4>Deploying Axis in Apache</h4>
</div>
<p>1) Create a directory structure called &ldquo;Axis&rdquo; inside [APACHE_HOME] as follows<br>

<br>Axis<br>|__ libs ( Copy the two dll file from xerces-c-x.x-win32/bin and paste it inside)<br>|__ logs (log files are located here)<br>|__ conf (server.wsdd file is located here)<br>|__ webservices (The place to put webservice dlls)<br>|__ wsdls (The directory for the wsdl files of the deployed web services)<br>
<br>NOTE: If you copy xerces dll files to [APACHE_HOME]\Axis\libs from a version other than the one you used to build the Axis source with, you may have trouble starting up the Apache web server.<br>
<br>2) Set the &ldquo;PATH&rdquo; environment variable to the following directories.<br>[APACHE_HOME]<br>[APACHE_HOME]\Axis\libs<br>
<br>3) Change the apache configuration file [APACHE_HOME]\conf\httpd.conf to include the following lines at the bottom.<br>

<br>LoadModule axis_module modules/mod_axis.dll<br>&lt;Location /axis&gt;<br>SetHandler axis<br>&lt;/Location&gt;<br>
<br>
<br>4)create a file in [APACHE_HOME]\Axis named &ldquo;axiscpp.conf &ldquo; which should contain the following lines.<br>
<br>AXISLOGPATH:XXXX<br>WSDDFILEPATH:YYYY<br>
<br>Where XXXX will be the path to a file named AxisLog (The log file)and YYYY will be the path to the server.wsdd file.<br>
<br>i.e.<br>AXISLOGPATH: [APACHE_HOME]\Axis\logs\AxisLog //<br>WSDDFILEPATH: [APACHE_HOME]\Axis\conf\server.wsdd //<br>

<br>5)Set an environment variable named AXIS_HOME and give [APACHE_HOME]\Axis as the value.<br>
<br>6)Select start-&gt;programs-&gt;Apache HTTP server-&gt;Control Apache Server-&gt;stop to stop the apache server<br>(This is because apache will be started automatically by the installation program)<br>
<br>Open up a DOS terminal and give the command "apache -k start" to start apache<br>(IT IS IMPORTANT TO START APACHE THIS WAY.)<br>
<br>(NOTE:If a 126 error occurs check whether the &ldquo;path&rdquo; variable has been set correctly as mentioned<br>before and whether the correct versions of the xerces dlls have been copied as instructed before)<br>

<br>open a browser and verify whether you can browse http://localhost/ (or give the machines ip as http://xxx.xxx.xxx.xxx/). If apache is running you will see the Apache start page in the browser.&nbsp;</p>
<p>
<a name="deploywebservice"></a>
</p>
<div class="h3">
<h3>Deploying a web service in Axis C++</h3>
</div>
<p>
<a name="generatefiles"></a>
</p>
<div class="h4">
<h4>Generating Serverside Skeletons/ wrappers and client side stubs</h4>
</div>
<p>

<a name="eclipse"></a>
</p>
<div class="h2">
<h2>Using eclipse to build and run WSDL2Ws</h2>
</div>
<p>In the checked out source code there is a tool &ldquo;wsdl2ws&rdquo; (i.e. wsdl-to-web services) written in java that generates server side Skeletons/wrappers and client side stubs using a given WSDL file. This Section describes how this is done.<br>To build and run the java tool this section uses the eclipse platform. For this documentation eclipse 2.1.0 was used and the jdk version used was j2sdk1.4.1_01. You will not be able to build the java tool with jdk versions below 1.4.0.<br>
<br>1)Start the eclipse platform IDE.<br>Go to File-&gt;New-&gt;Project.<br>

<br>Select java in the &ldquo;New Project&rdquo; dialog and click &ldquo;Next&rdquo;.<br>
<br>In the &ldquo;New&rdquo; dialog that appears give a project Name (e.g. test). In the &ldquo;New dialog&rdquo; keep the &ldquo;use default&rdquo; Tick Box checked.<br>Note down the path in the &ldquo;Directory&rdquo; Text Box. This location will be referred to as [SKELSTUB_HOME] from this point onwards. Click &ldquo;Next&rdquo;.<br>

<br>Another dialog named &ldquo;New&rdquo; will appear. Select the &ldquo;Source&rdquo; tab. Select the project that you created (i.e. test).<br>Click on &ldquo;Add Folder&hellip;&rdquo;. In the &ldquo;Source Folder Selection&rdquo; dialog that appears select the project that you created (i.e. test) and click &ldquo;Create New Folder&hellip;&rdquo;. In the &ldquo;New Folder&rdquo; dialog that appears give a folder name as &ldquo;src&rdquo; and click &ldquo;OK&rdquo;. Click &ldquo;OK&rdquo; in the &ldquo;Source Folder Selection&rdquo; dialog. Click &ldquo;Yes&rdquo; on the confirmation message box that pops up.<br>

<br>Click &ldquo;Libraries&rdquo; in the &ldquo;New&rdquo; dialog. Click &ldquo;Add External JARs&hellip;&rdquo;. In the &ldquo;JAR Selection&rdquo; dialog that appears browse to [CHECKOUT_HOME]\ contrib\wss4j\lib and select the following JARs.<br>
<br>axis.jar<br>commons-discovery.jar<br>commons-logging.jar<br>jaxrpc.jar<br>saaj.jar<br>wsdl4j.jar<br>xml-apis.jar<br>

<br>Click &ldquo;Open&rdquo;.<br>
<br>Click &ldquo;Finish&rdquo; on the &ldquo;New&rdquo; dialog.<br>
<br>2) Copy the &ldquo;org&rdquo; folder inside [CHECKOUT_HOME]\ c\src\wsdl to [SKELSTUB_HOME]\src. The &ldquo;org&rdquo; folder contains the package structure for the WSDL2Ws java tool.<br>3) Go to eclipse and right click on the &ldquo;Package Explorer&rdquo; window and click on &ldquo;Refresh&rdquo; in the popup menu that appears. Now you should be able to see the source that was copied, in the &ldquo;Package Explorer&rdquo; window. By now eclipse would have built the WSDL2Ws tool.<br>

<br>For this demonstration we will use a Calculator web service and the WSDL file for that web service is <a href="../cfiles/Calculator.wsdl">Calculator.wsdl</a>.<br>
<br>Copy the Calculator.wsdl to [SKELSTUB_HOME]<br>
<br>In eclipse go to &ldquo;Run-&gt;Run&hellip;&rdquo;.<br>In the &ldquo;Run&rdquo; dialog select the &ldquo;Main&rdquo; tab. In &ldquo;Project&rdquo; text box give the name of the project you created (i.e. test).<br>In the &ldquo;Main Class&rdquo; text box give the class as &ldquo;org.apache.axis.wsdl.wsdl2ws.WSDL2Ws&rdquo;.<br>&nbsp;</p>

<p>
<img alt="" src="images/c/main_class.jpg"></p>
<p>Select the &ldquo;Arguments&rdquo; tab.</p>
<p>In the &ldquo;Program Arguments&rdquo; text box give the following argument.</p>
<p>&ldquo;Calculator.wsdl -o./ServerOut -lc++ -sserver&rdquo;.</p>
<p>
<img alt="" src="images/c/argument.jpg"></p>

<p>NOTE: These are the arguments for the java tool WSDL2Ws. The usage of the WSDL2Ws is as follows.<br>Java org.apache.axis.wsdl.wsdl2ws.WSDL2Ws &lt;wsdl file&gt; -o&lt;output directory&gt;<br>-l&lt;c|c++&gt; -s&lt;(server|client)&gt;.<br>Also note that there cannot be any spaces after a switch (i.e. &ndash;o, -l).<br>
<br>Click &ldquo;Run&rdquo;.<br>Now the Skeletons/Wrappers will be generated and you will see messages in the eclipse console displaying the generated files. The generated Skeletons/Wrappers will be created in a folder named [SKELSTUB_HOME]\ServerOut as given in the arguments when the tool was run.<br>

<br>Similarly to generate the client stubs use the following arguments in eclipse and run.<br>&ldquo;Calculator.wsdl -o./ClientOut -lc++ -sclient&rdquo;.<br>The generated Stubs will be created in a folder named [SKELSTUB_HOME]\ClientOut.<br>&nbsp;</p>
<p>
<a name="commandline"></a>
</p>
<div class="h2">
<h2>Building and running WSDL2Ws on the command line</h2>
</div>
<p>For building WSDL2Ws java tool on the command line you require jdk1.4 or above.<br>
<br>To build WSDL2Ws java tool you should set the CLASSPATH Environment Variable to point to the following jar files in [CHECKOUT_HOME]\ contrib\wss4j\lib.<br>
<br>axis.jar<br>commons-discovery.jar<br>commons-logging.jar<br>jaxrpc.jar<br>saaj.jar<br>wsdl4j.jar<br>xml-apis.jar<br>The CLASSPATH Environment Variable should have the absolute paths of the jars (including the jar file name) given as a semicolon separated list.<br>

<br>Open a command window.<br>Change directory to [CHECKOUT_HOME]\c\src\wsdl.<br>We will refer to this directory as [SKELSTUB_HOME] as we did during generating Skeletons/Wrappers and Stubs with eclipse<br>Run the following command to build the java tool.<br>Javac -sourcepath . org\apache\axis\wsdl\wsdl2ws\WSDL2Ws.java<br>
<br>If the command finishes without any output then the java tool has been built.<br>
<br>Now copy the <a href="../cfiles/Calculator.wsdl">Calculator.wsdl</a> file which we use in this example to [SKELSTUB_HOME]<br>
<br>Now run the following command to generate the server side skeletons and wrappers.<br>
<br>Java -classpath %classpath%;. org.apache.axis.wsdl.wsdl2ws.WSDL2Ws Calculator.wsdl -o./ServerOut -lc++ -sserver<br>

<br>If the tools is successful the tool will display the files the it has generated. The skeletons and stubs will be generated in [SKELSTUB_HOME]\ServerOut.<br>
<br>Run the following command to generate the client stubs.<br>
<br>Java -classpath %classpath%;. org.apache.axis.wsdl.wsdl2ws.WSDL2Ws Calculator.wsdl -o./ClientOut -lc++ -sclient<br>
<br>The generated client stubs will be in [SKELSTUB_HOME]\ClientOut<br>&nbsp;</p>
<p>
<a name="builddeployws"></a>
</p>
<div class="h4">
<h4>Building and Deploying the web service</h4>
</div>
<p>1) Start Visual C++.<br>2) Go to File-&gt;Open and open the workspace file &ldquo;Axis.dsw&rdquo; in [CHECKOUT_HOME]\ \c\vc.<br>3) Go to Project-&gt;Add To Project-&gt;New&hellip;<br>4) Select the &ldquo;Projects&rdquo; tab<br>5) Select &ldquo;Win 32 Dynamic-Link Library&rdquo;<br>6) Give a project name (e.g. ws1) and click &ldquo;OK&rdquo;.<br>7) In the dialog that appears select &ldquo;An empty DLL project&rdquo; click &ldquo;Finish&rdquo; and then &ldquo;OK&rdquo;.<br>8) When this procedure is followed the ws1 project files are created in [CHECKOUT_HOME]\c\vc\ws1.<br>9) Right click on the project that you created (i.e. ws1) and click &ldquo;Add Files to Project&hellip;&rdquo; on the menu that appears. In the &ldquo;Insert Files into Project&rdquo; dialog select the generated .cpp and .h files in [SKELSTUB_HOME]\ServerOut and click &ldquo;OK&rdquo;.<br>10) Right click on the project (i.e. ws1)again and click on &ldquo;Settings&hellip;&rdquo; on the menu that appears. Click the C/C++ tab and select &ldquo;Preprocessor&rdquo; from the &ldquo;Category&rdquo; Drop down list.<br>In the &ldquo;Additional include directories&rdquo; give &ldquo;../../include&rdquo;<br>

</p>
<img alt="" src="images/c/new_config_include.jpg"><p>11) Now business logic should be added to the generated Skeletons. The Skeletons in this case are Calculator.h and Calculator.cpp<br>12) Two methods are available for implementation in Calculator.cpp we shall implement them as follows.<br>int Calculator::add(int Value0, int Value1)<br>{<br>return Value0+Value1; //business logic<br>}<br>int Calculator::subtract(int Value0, int Value1)<br>{<br>return Value0-Value1; //business logic<br>}<br>13) Right click on the project (i.e. ws1) and click &ldquo;Build&rdquo; on the menu that appears. Visual C++ should be able to build the project without any errors now.<br>
<br>14) The ws1.dll will be build in [CHECKOUT_HOME]\c\vc\ws1\Debug by Visual C++<br>15) Place the built ws1.dll file in [APACHE_HOME] \ Axis \webservices<br>16) In addition to this you have to create sever.wsdd file in [APACHE_HOME]\Axis\conf<br>

<br>The <a href="../cfiles/server.wsdd">server.wsdd</a> file for this example is given below</p>
<br>
<pre>&lt;deployment&gt;
&lt;service name="Calculator"&gt;
&lt;parameter name="className"
value="[APACHE_HOME]\Axis\webservices\ws1.dll"/&gt;
&lt;parameter name="allowedMethods" value="subtract add "/&gt;
&lt;/service&gt;
&lt;/deployment&gt;</pre>

<br>
<p>In this file [APACHE_HOME] should be replaced with the actual value of [APACHE_HOME] (i.e. For this case C:\Program Files\Apache Group\Apache )<br>
<br>Description of the server.wsdd file<br>
<br>The service element specifies the service name.<br>&lt;service name="Calculator"&gt;<br>
<br>In this parameter element we specify the parameter className and it&rsquo;s value, the location of the webservice dll.<br>&lt;parameter name="className" value="C:\Program Files\Apache Group\Apache\Axis\webservices\ws1.dll"/&gt;<br>
<br>In this parameter element we specify the parameter allowedMethods and its value, the methods exposed by the web service (i.e. subtract and add).<br>
<strong>Note: A trailing space should be put after every allowed method.</strong>
<br>&lt;parameter name="allowedMethods" value="subtract add "/&gt;<br>

<br>17) Now start the apache web server by typing &ldquo;apache &ndash;k start&rdquo;. If it is running type &ldquo;apache &ndash;k restart&rdquo;<br>
<br>18) Now type http://localhost/axis/ in a browser and you will see the &ldquo;Welcome to Axis C++&rdquo; page with a listing of deployed services (In this case the Calculator service only).<br>&nbsp;</p>
<p>
<a name="consumews"></a>
</p>
<div class="h3">
<h3>Consuming the web service with Axis c++ client</h3>

</div>
<p>
<a name="runclient"></a>
</p>
<div class="h4">
<h4>Coding and Running the client</h4>
</div>
<p>1) Start Visual C++. 2) Go to File-&gt;Open and open the workspace file &ldquo;Axis.dsw&rdquo; in [CHECKOUT_HOME]\ \c\vc.<br> 3) Go to Project-&gt;Add To Project-&gt;New&hellip;<br> 4) Select the &ldquo;Projects&rdquo; tab<br> 5) Select &ldquo;Win 32 Console Application&rdquo;<br> 6) Give a project name (e.g. calclient) and click &ldquo;OK&rdquo;.</p>

<p>
<img alt="" src="images/c/new_config_clientEXE.jpg"></p>
<p>7) In the dialog that appears select &ldquo;An empty project&rdquo; click &ldquo;Finish&rdquo; and then &ldquo;OK&rdquo;.<br>
<br>8) When this procedure is followed the calclient project files are created in [CHECKOUT_HOME]\c\vc\calclient.<br>9) Right click on the project that you created (i.e. ws1) and click &ldquo;Add Files to Project&hellip;&rdquo; on the menu that appears. In the &ldquo;Insert Files into Project&rdquo; dialog select the generated .cpp and .h files in [SKELSTUB_HOME]\ClientOut and click &ldquo;OK&rdquo;.<br>10) Right click on the project (i.e. calclient) again and click on &ldquo;Settings&hellip;&rdquo; on the menu that appears. Click the &ldquo;C/C++&rdquo; tab and select &ldquo;Preprocessor&rdquo; from the &ldquo;Category&rdquo; Drop down list.<br>In the &ldquo;Additional include directories&rdquo; give &ldquo;../../include&rdquo;<br>

</p>
<p>
<img alt="" src="images/c/new_config_client_include.jpg"></p>
<p>11) Click the &ldquo;Link&rdquo; tab and select &ldquo;Input&rdquo; from the &ldquo;Category&rdquo; Drop down list.<br>Remove the contents of the &ldquo;Object/library modules&rdquo; and add the following libs to it.<br>

<br>Common_D.lib Soap_D.lib wsdd_D.lib Engine_D.lib xerces-c_2D.lib client_D.lib ws2_32.lib<br>
<br>In the &ldquo;Additional library path&rdquo; text box give the following, comma separated list of paths.<br>
<br>../../lib/win32/axis, ../../lib/win32/xercesc<br>
<br>Click &ldquo;OK&rdquo;.<br>&nbsp;</p>
<p>
<img alt="" src="images/c/new_config_client_lib.jpg"></p>
<p>Now the client should be coded. Basically this will be a main method. We will write the main method in the file Calculator.cpp. This is the stub generated by the java tool in the stub generation step.<br>

<br>Add the following main method to Calculator.cpp<br>
</p>
<pre>void main()
{
Calculator cal;
int result = cal.add(22, 33);
printf("The result is : %d", result);
}</pre>
<br>
<p>Right click on the project and click &ldquo;Build&rdquo; on the menu that appears.<br>If Visual C++ complains about missing libs go to Build-&gt;Rebuild All (Do make sure that the apache server is stopped). Now the client exe is built.<br>Start the apache by typing apache &ndash;k start and run the exe from Visual C++ by going to Build-&gt;Execute calclient.exe. Now you will see the SOAP Request, SOAP Response and the result printed by the main method that we coded.</p>
<div id="pdf" align="right">

<a href="windev-guide.pdf"><img alt="PDF" src="../skin/images/pdfdoc.gif" class="skin"><br>
          PDF</a>
</div>
</div>
</div>
</div>
</td>
<!--================= end Content ==================-->
</tr>
</tbody>
</table>
<!--================= end Main ==================-->
<!--================= start Footer ==================-->
<div id="footer">
<table summary="footer" cellspacing="0" cellpadding="4" width="100%" border="0">

<tbody>
<tr>
<!--================= start Copyright ==================-->
<td colspan="2">
<div align="center">
<div class="copyright">
              Copyright &copy; 2000-2003&nbsp;The Apache Software Foundation. All rights reserved.
            </div>
</div>
</td>
<!--================= end Copyright ==================-->
</tr>
<tr>

<td align="left">
<!--================= start Host ==================-->
<!--================= end Host ==================--></td><td align="right">
<!--================= start Credits ==================-->
<div align="right">
<div class="credit"></div>
</div>
<!--================= end Credits ==================-->
</td>
</tr>
</tbody>
</table>
</div>
<!--================= end Footer ==================-->
</body>
</html>
