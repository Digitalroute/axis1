<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--*** This is a generated file.  Do not edit.  ***-->
<link rel="stylesheet" href="../skin/tigris.css" type="text/css">
<link rel="stylesheet" href="../skin/mysite.css" type="text/css">
<link rel="stylesheet" href="../skin/site.css" type="text/css">
<link media="print" rel="stylesheet" href="../skin/print.css" type="text/css">
<title></title>
</head>
<body bgcolor="white" class="composite">
<!--================= start Banner ==================-->
<div id="banner">
<table width="100%" cellpadding="8" cellspacing="0" summary="banner" border="0">
<tbody>
<tr>

<!--================= start Group Logo ==================-->
<td align="left">
<div class="groupLogo">
<a href="http://ws.apache.org/"><img border="0" class="logoImage" alt="The Apache WebServices Project" src="../images/project-logo.jpg"></a>
</div>
</td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td align="right">
<div class="projectLogo">
<a href="http://ws.apache.org/axis/"><img border="0" class="logoImage" alt="The Apache Axis Project" src="../images/axis.jpg"></a>
</div>
</td>
<!--================= end Project Logo ==================-->
<!--================= start Search ==================--><td valign="top" rowspan="2" align="right" class="search">
<form target="_blank" action="http://www.google.com/search" method="get">
<table summary="search" border="0" cellspacing="0" cellpadding="0">
<tr>

<td bgcolor="#a5b6c6" colspan="3"><img height="10" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td colspan="3"><img height="8" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td nowrap="nowrap"><input value="ws.apache.org" name="sitesearch" type="hidden"><input size="10" name="q" id="query" type="text"><img height="1" width="5" alt="" src="../skin/images/spacer.gif" class="spacer"><input name="Search" value="GO" type="submit">
<br>
                          Search WS</td><td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td colspan="3"><img height="7" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td class="bottom-left-thick"></td><td bgcolor="#a5b6c6"><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td class="bottom-right-thick"></td>

</tr>
</table>
</form>
</td>
<!--================= end Search ==================-->
</tr>
</tbody>
</table>
</div>
<!--================= end Banner ==================-->
<!--================= start Main ==================-->
<table width="100%" cellpadding="0" cellspacing="0" border="0" summary="nav" id="breadcrumbs">
<tbody>
<!--================= start Status ==================-->
<tr class="status">
<td>
<!--================= start BreadCrumb ==================--><a href="http://www.apache.org/">Apache</a> | <a href="http://ws.apache.org/">WS</a><a href=""></a>

<!--================= end BreadCrumb ==================--></td><td id="tabs">
<!--================= start Tabs ==================-->
<div class="tab">
<span class="selectedTab"><a class="base-selected" href="../index.html">WebServices-Axis</a></span>
</div>
<!--================= end Tabs ==================-->
</td>
</tr>
</tbody>
</table>
<!--================= end Status ==================-->
<table id="main" width="100%" cellpadding="8" cellspacing="0" summary="" border="0">
<tbody>
<tr valign="top">
<!--================= start Menu ==================-->
<td id="leftcol">

<div id="navcolumn">
<div class="menuBar">
<div class="menu">
<span class="menuLabel">Axis</span>
 
<div class="menuItem">
<a href="../index.html">Introduction</a>
</div>
 
<div class="menuItem">
<a href="../news.html">News</a>
</div>

 

<div class="menuItem">
<a href="http://nagoya.apache.org/wiki/apachewiki.cgi?AxisProjectPages">FAQ/Wiki</a>
</div>
 
<div class="menu">
<span class="menuLabel">Get Involved</span>
  
<div class="menuItem">
<a href="../overview.html">Overview</a>
</div>
  
<div class="menuItem">
<a href="../cvs.html">CVS Repository</a>

</div>
  
<div class="menuItem">
<a href="../mail.html">Mailing Lists</a>
</div>
  
<div class="menuItem">
<a href="../ref.html">Reference Library</a>
</div>
  
<div class="menuItem">
<a href="../bugs.html">Bugs</a>
</div>
 

</div>
 
<div class="menu">
<span class="menuLabel">Axis (Java)</span>
  
<div class="menuItem">
<a href="../java/index.html">Documentation</a>
</div>
  
<div class="menuItem">
<a href="../java/install.html">Installation</a>
</div>
  
<div class="menuItem">

<a href="../java/user-guide.html">User's Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/developers-guide.html">Developer's Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/integration-guide.html">Integration Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/architecture-guide.html">Architecture Guide</a>

</div>
  
<div class="menuItem">
<a href="../java/reference.html">Reference Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/reading.html">Reading Guide</a>
</div>
  
<div class="menuItem">
<a href="../java/requirements.html">Requirements</a>
</div>
 

</div>
 
<div class="menu">
<span class="menuLabel">Axis (C++)</span>
  
<div class="menuItem">
<a href="../cpp/index.html">Axis C++ alpha released!</a>
</div>
  
<div class="menuItem">
<a href="../cpp/documentation.html">Documenation</a>
</div>
  
<div class="menuItem">

<a href="../cpp/download.html">Download</a>
</div>
  
<div class="menuItem">
<a href="../cpp/who.html">Who we are</a>
</div>
  
</div>

<div class="menu">
<span class="menuLabel">Downloads</span>
  
<div class="menuItem">
<a href="../releases.html">Releases</a>

</div>
  
<div class="menuItem">
<a href="../interim.html">Interim Drops</a>
</div>
  
<div class="menuItem">
<a href="http://cvs.apache.org/viewcvs/ws-axis/">Source Code</a>
</div>

</div>

<div class="menu">
<span class="menuLabel">Related Projects</span>

  
<div class="menuItem">
<a href="http://ws.apache.org/wsif/">WSIF</a>
</div>
  
<div class="menuItem">
<a href="http://cvs.apache.org/viewcvs/*checkout*/ws-wsil/java/README.htm">WSIL</a>
</div>
  
<div class="menuItem">
<a href="http://www-124.ibm.com/developerworks/projects/wsdl4j/">WSDL4J</a>
</div>
  
<div class="menuItem">

<a href="http://www.uddi4j.org/">UDDI4J</a>
</div>

</div>

<div class="menu">
<span class="menuLabel">Misc</span>
  
<div class="menuItem">
<a href="../site.html">Whole Site</a>
</div>
  
<div class="menuItem">
<a href="../who.html">Who We Are</a>

</div>
  
<div class="menuItem">
<a href="../contact.html">Contact</a>
</div>
  
<div class="menuItem">
<a href="../legal.html">Legal</a>
</div>

  
<div class="menuItem">
<a href="../docs.html">Notes/Docs</a>
</div>

</div>


</div>
</div>
</div>
</td>
<!--================= end Menu ==================-->
<!--================= start Content ==================--><td>
<div id="bodycol">
<div class="app">
<div align="center">
<h1></h1>
</div>
<div class="h3">
<div class="h3">

<h3>Axis C++ windows user guide</h3>
</div>
<div class="h4">
<h4>Creating And Deploying your own Web Service</h4>
</div>
<p>
<a href="#create">Creating the web service</a>
<br>
<a href="#wsdl2ws">How to use the WSDL2WS tool on the command line</a>
<br>
<a href="#deploy">Deploying your web service</a>
<br>

<a href="#client">Writing the client</a>
<br>
<a href="#sample">Running your sample</a>
<br>
<br>
<strong>Before you follow this guide, make sure that you have followed the</strong> <a href="wininstall-guide.html"><strong>Windows Installation guide</strong></a>
</p>
<p>
<a name="create"></a>
</p>
<div class="h4">
<h4>Creating the web service</h4>

</div>
<br>
<p>Currently axis supports two methods to create and deploy a Web Service.<br>Method 1) A top down approach where you start with a WSDL.<br>Method 2) A bottom up apporach where you start with a pre-written web service.<br>
<br>Here we discuss the first apporach since the tool to support Method 2 (i.e wcg.exe) is still at its primitive stage in this Alpaha Release.<br>Here the document is written with the idea that the user uses Visual C++ (VC). But user could use this guide with a different IDE of his choice.<br>
<br>
<strong>Method 1</strong>
<br> This method assums that the user has written the wsdl of the service which he needs to deploy. In this methods user will start with this wsdl and the tool will generate the web service skeleton and other required files.<br>1) Get your wsdl (eg:<a href="../cfiles/Calculator.wsdl">Calculator.wsdl</a>)<br>2) Run the WSDL2WS tool (refer the section below 'How to use the WSDL2WS tool on the command line') and generate the server side skeletons and wrappers. These files will be in two new folder which are gentrated from the tool called 'ServerOut' and 'ClientOut'.<br>3) Create a VC workspace.<br>4) Create a 'Win32 Static Library' project in this workspace.<br>5) Add the following files to this project, from the generated 'ServerOut' folder. Calculator.cpp Calculator.h<br>6) Set the include path to the include directory of the binary distribution (These include files are in AXIS_EXTRACT/include/).<br>7) Fill the empty methods of the generated skelitons. Here the idea is<br>8) Generate the lib (eg: MyCalculator.lib)<br>9) Now create a 'Win32 Dynamic-Link Library' project.<br>10) Add the following files to this project, from the generated 'ServerOut' folder. CalculatorService.cpp CalculatorWrapper.cpp CalculatorWrapper.h<br>11) Set the include path to the include directory of the binary distribution.<br>12) Add the above created lib (Calculator.lib) to the library modules of this project.<br>13) Build and create the DLL. (Calculator.dll)</p>

<p>
<a name="wsdl2ws"></a>
</p>
<div class="h4">
<h4>How to use the WSDL2WS tool on the command line</h4>
</div>
<br>
<p>For using WSDL2Ws java tool on the command line you require jdk1.4 or above.<br>
<br>To use WSDL2Ws java tool you should set the CLASSPATH Environment Variable to point to the following jar files in AXIS_EXTRACT\lib\axisjava.<br>
<br>axis.jar<br>commons-discovery.jar<br>commons-logging.jar<br>jaxrpc.jar<br>saaj.jar<br>wsdl4j.jar<br>xml-apis.jar<br>

<br> The CLASSPATH Environment Variabe should have the absolute paths of the jars (including the jar file name) given as a semicolon separated list.<br>
<br>Open a command window. Change directory to AXIS_EXTRACT\lib\axis. We will call this folder as WSDL2WS_FOLDER.<br>
<br>Now copy the wsdl file (eg.Calculator.wsdl) which you use to the folder WSDL2WS_FOLDER.<br>
<br>Now run the following command to generate the server side skeletons and wrappers.<br>
<br>Java -classpath %classpath%;.\wsdl2ws.jar org.apache.axis.wsdl.wsdl2ws.WSDL2Ws Calculator.wsdl -o./ServerOut -lc++ -sserver<br>
<br> If the tools is successful the tool will display the files the it has generated. The skeletons and wrappers will be generated in [WSDL2WS_FOLDER]\ServerOut.<br>
<br>Run the following command to generate the client stubs.<br>
<br>Java -classpath %classpath%;.\wsdl2ws.jar org.apache.axis.wsdl.wsdl2ws.WSDL2Ws Calculator.wsdl -o./ClientOut -lc++ -sclient<br>

<br> The generated client stubs will be in [WSDL2WS_FOLDER]\ClientOut</p>
<p>
<a name="deploy"></a>
</p>
<div class="h4">
<h4>Deploying your web service</h4>
</div>
<br>
<p>Currently the AdminClient tool is having some known bugs. So this section shows you how to deploy your Web Service manually, without using the AdminClient tool.<br>1) Copy the above Calculator.dll to the folder APACHE_FOLDER/Axis/webservices.<br>2) Go and add the following in the server.wsdd at the service level. Make sure you add these line at the correct place, i.e at service level. (APACHE_FOLDER/Axis/conf/server.wsdd)<br>
<br>&lt;service name="Calculator" provider="C:RPC" description="Calculator Web Service"&gt;<br>&lt;parameter name="className" value="Axis\webservices\Calculator.dll"/&gt;<br>&lt;parameter name="allowedMethods" value="add subtract "/&gt;<br>&lt;/service&gt;<br>

<br>SUCCESS ! Now you have deployed your web service</p>
<p>
<a name="client"></a>
</p>
<div class="h4">
<h4>Writing the client</h4>
</div>
<br>
<p>With the WSDL2WS tool you have almost developed your client. What you have to do next is write a file which has a main method and create a object of the stub and invoke your methods on that.<br>1) Create a vc workspace.<br>2) Create a 'Win32 Console Application'.<br>3) Add files to this project from the above generated 'ClientOut' folder.<br>4) Set the include path to the include directory of the binary distribution.<br>5) Add the following libs to the library modules path of this project.<br>

<br>AXIS_EXTRACT/lib/axis/<br>client.lib<br> Common.lib<br> engine.lib<br> Soap.lib<br> WSDD.lib<br> XML.lib<br>
<br> AXIS_EXTRACT/lib/xerces-c<br>xerces-c_2.lib<br>wsock32.lib<br>6) Create a file with the main method which looks similar to the following and add this file to this project.<br>

</p>
<pre>#include "Calculator.h"
int main()
{ 
    Calculator c; 
    int result = c.add(40, 20);
    printf("result = %d", result);
    return 0;
}
</pre>
<p>7) Now build and create the Client.exe</p>
<p>
<a name="sample"></a>
</p>
<div class="h4">
<h4>Running your sample</h4>
</div>
<p>1) Restart Apache.<br>2) Run the Client.exe<br>
<br> SUCCESS ! If you get the result, you are done.</p>

<div id="pdf" align="right">
<a href="winuser-guide.pdf"><img alt="PDF" src="../skin/images/pdfdoc.gif" class="skin"><br>
          PDF</a>
</div>
</div>
</div>
</div>
</td>
<!--================= end Content ==================-->
</tr>
</tbody>
</table>
<!--================= end Main ==================-->
<!--================= start Footer ==================-->
<div id="footer">

<table summary="footer" cellspacing="0" cellpadding="4" width="100%" border="0">
<tbody>
<tr>
<!--================= start Copyright ==================-->
<td colspan="2">
<div align="center">
<div class="copyright">
              Copyright &copy; 2000-2003&nbsp;The Apache Software Foundation. All rights reserved.
            </div>
</div>
</td>
<!--================= end Copyright ==================-->
</tr>

<tr>
<td align="left">
<!--================= start Host ==================-->
<!--================= end Host ==================--></td><td align="right">
<!--================= start Credits ==================-->
<div align="right">
<div class="credit"></div>
</div>
<!--================= end Credits ==================-->
</td>
</tr>
</tbody>
</table>
</div>
<!--================= end Footer ==================-->
</body>
</html>
