<?xml version="1.0"?>
<!-- ====================================================================== 
     Feb 11, 2005 1:04:21 PM                                                        

      This build file is intended to compile and run the Axis2 samples
      provided here with the service being deployed at Tomcat or by
      running a simple Axis2 server.   
     
                   
                                                                     
     ====================================================================== -->
<project name="samples" basedir=".." default="doInterop-test">
     <property name="maven.repo.local" value="${user.home}/.maven/repository/" />
     <property name="class.dir" value="${basedir}/target/test-classes" />
     <property name="report.dir" value="${basedir}/target/test-reports" />
     <property name="src.dir" value="${basedir}/test" />
     <property name="interop3.dir" value="target/interop3"/>
     <property name="work.dir" value="${interop3.dir}/work"/>
     <property name="calss.dir" value="${interop3.dir}/classes"/>
     <property name="wsdl.dir" value="${basedir}/../wsdl/test-resources/"/>
           

	<path id="test.classpath">
		      <fileset dir="${maven.repo.local}">
					<include name="j2ee/jars/activation.jar"/>
					<include name="j2ee/jars/mail.jar"/>
					<include name="axis/jars/axis2-core-0.9.jar"/>
					<include name="axis/jars/axis2-common-0.9.jar"/>
					<include name="axis/jars/axis2-tools-0.9.jar"/>
					<include name="axis/jars/axis2-xml-0.9.jar"/>
					<include name="axis/jars/axis2-wsdl-0.9.jar"/>
					<include name="axis/jars/axis-wsdl4j-1.2.jar"/>
					<include name="commons-logging/jars/commons-logging-1.0.3.jar"/>
					<include name="commons-httpclient/jars/commons-httpclient-3.0-rc2.jar"/>
					<include name="stax/jars/stax-1.1.1-dev.jar"/>
					<include name="stax/jars/stax-api-1.0.jar"/>
					<include name="log4j/jars/log4j-1.2.8.jar"/>
					<include name="junit/jars/*.jar"/>
					<include name="xmlbeans/jars/xbean-2.0.0-beta1.jar"/>
		      </fileset>
		      <pathelement location="${class.dir}"/>
	</path>
	
     <taskdef name="wsdl2java"
        classname="org.apache.axis2.tool.ant.AntCodegenTask"
            classpathref="test.classpath"/>
	
	<target name="doInterop-test">
              <mkdir dir="${interop3.dir}"/>  
			<mkdir dir="${work.dir}"/>  
				<mkdir dir="${calss.dir}"/>                       
				
		       <wsdl2java WSDLFileName="${wsdl.dir}compound2.wsdl" output="${work.dir}"/> 
               
                <move todir="${classes.dir}/schema">
            		<fileset dir="${work.dir}/schema"/>
               </move>   
    	
              <javac srcdir="${work.dir}" destdir="${classes.dir}" debug="on">
                  <classpath refid="test.classpath" />
              </javac>
    	
    	     <!-- Run the interop test 
    	     <java classname="Client">
                <classpath refid="maven.dependency.classpath" />
   		     </java>
    	
		    <junit dir="${classes.dir}" printsummary="yes" haltonfailure="yes">
			    <classpath refid="maven.dependency.classpath" />
			    <formatter type="plain"/>
			    <test name="InteropClient2" />
		    </junit>
		    
		    -->
	</target>
</project>

