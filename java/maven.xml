<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 * Copyright 2001-2004 The Apache Software Foundation.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
 -->
<project default="multiproject:install" xmlns:m="jelly:maven">
		 <goal name="clean">
			 	<attainGoal name="multiproject:clean"/>
		</goal>


    <goal name="war" prereqs="multiproject:install"> 
        <!-- jar the test classes -->
        <mkdir dir="target"/>
		<war destfile="target/axis2.war" webxml="modules/core/src/conf/web.xml">
		  <fileset dir="modules/core/src/html"/>
		  <lib dir="${maven.repo.local}/stax/jars/">
		    <include name="stax-api-1.0.jar"/>
		    <include name="stax-1.1.1-dev.jar"/>		    
		  </lib>  
		  <lib dir="${maven.repo.local}/commons-logging/jars/">
		    <include name="commons-logging-1.0.3.jar"/>
		  </lib>  
		  <lib dir="${maven.repo.local}/axis/jars/">
		    <include name="axis-wsdl4j-1.2-RC1.jar"/>
		  </lib>  
		  <lib dir="${maven.repo.local}/log4j/jars/">
		    <include name="log4j-1.2.8.jar"/>
		  </lib>  
		  <lib dir="modules/om/target/">
		    <include name="axis2*.jar"/>
		  </lib>  
		  <lib dir="modules/core/target/">
		    <include name="axis2*.jar"/>
		  </lib>  
		  <lib dir="modules/deployment/target/">
		    <include name="axis2*.jar"/>
		  </lib>  
		  <lib dir="modules/wsdl/target/">
		    <include name="axis2*.jar"/>
		  </lib>  
		  <lib dir="modules/samples/target/">
		    <include name="axis2*.jar"/>
		  </lib>  
		<classes dir="modules/core/src/conf">
      		    <include name="*.properties"/>
		</classes>
		</war>
    </goal>
    
    <goal name="war-withsamples" prereqs="multiproject:install"> 
        <!-- jar the test classes -->
        <mkdir dir="target"/>
               <war destfile="target/axis2.war" webxml="modules/core/src/conf/web.xml">
                  <fileset dir="modules/core/src/html"/>
                  <webinf dir="modules/samples/target/test-resources/samples"/>
                  <lib dir="${maven.repo.local}/stax/jars/">
                    <include name="stax-api-1.0.jar"/>
                    <include name="stax-1.1.1-dev.jar"/>
                  </lib>
                  <lib dir="${maven.repo.local}/commons-logging/jars/">
                    <include name="commons-logging-1.0.3.jar"/>
                  </lib>
                  <lib dir="${maven.repo.local}/axis/jars/">
                    <include name="axis-wsdl4j-1.2-RC1.jar"/>
                  </lib>
                  <lib dir="${maven.repo.local}/log4j/jars/">
                    <include name="log4j-1.2.8.jar"/>
                  </lib>
				  <lib dir="modules/om/target/">
				    <include name="axis2*.jar"/>
				  </lib>  
				  <lib dir="modules/core/target/">
				    <include name="axis2*.jar"/>
				  </lib>  
				  <lib dir="modules/deployment/target/">
				    <include name="axis2*.jar"/>
				  </lib>  
				  <lib dir="modules/wsdl/target/">
				    <include name="axis2*.jar"/>
				  </lib>  
				  <lib dir="modules/samples/target/">
				    <include name="axis2*.jar"/>
				  </lib>  
				<classes dir="modules/core/src/conf">
		      		    <include name="*.properties"/>
				</classes>
                </war>
    </goal>

	<!-- to transforme htmls to xdocs -->
    <preGoal name="xdoc:jelly-transform">
    <attainGoal name="html2xdoc"/>
  </preGoal>
  
  <goal
    name="multiproject-javadoc"
    description="Generate the javadoc the entire project">

    <!-- Generate the javadoc for each of the components. -->

    
      <m:reactor basedir="${basedir}/modules"
               includes="*/project.xml"
               goals="javadoc"
               banner="Building"
               ignoreFailures="false"/>

  </goal>

</project>
